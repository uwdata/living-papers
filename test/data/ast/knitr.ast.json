{
  "metadata": {
    "plugins": {
      "knitr": {
        "dev": "svglite",
        "import": [
          "ggplot2",
          "jsonlite"
        ]
      }
    },
    "title": "R knitr Integration"
  },
  "article": {
    "type": "component",
    "name": "article",
    "children": [
      {
        "type": "component",
        "name": "p",
        "children": [
          {
            "type": "textnode",
            "value": "Version: "
          },
          {
            "type": "component",
            "name": "code",
            "properties": {
              "class": {
                "type": "value",
                "value": "bold"
              }
            },
            "children": [
              {
                "type": "textnode",
                "value": "r R.version.string"
              }
            ]
          }
        ]
      },
      {
        "type": "component",
        "name": "h1",
        "properties": {
          "id": {
            "type": "value",
            "value": "plots"
          }
        },
        "children": [
          {
            "type": "textnode",
            "value": "Plots"
          }
        ]
      },
      {
        "type": "component",
        "name": "p",
        "children": [
          {
            "type": "textnode",
            "value": "Let’s make some plots."
          }
        ]
      },
      {
        "type": "component",
        "name": "figure",
        "properties": {
          "class": {
            "type": "value",
            "value": "figure"
          }
        },
        "children": [
          {
            "type": "component",
            "name": "codeblock",
            "properties": {
              "class": {
                "type": "value",
                "value": "r"
              },
              "asp": {
                "type": "value",
                "value": "0.5"
              }
            },
            "children": [
              {
                "type": "textnode",
                "value": "ggplot(faithfuld, aes(waiting, eruptions, z = density)) +\n  geom_contour_filled()"
              }
            ]
          },
          {
            "type": "component",
            "name": "caption",
            "children": [
              {
                "type": "textnode",
                "value": "Density plot of Old Faithful"
              }
            ]
          }
        ]
      },
      {
        "type": "component",
        "name": "figure",
        "properties": {
          "class": {
            "type": "value",
            "value": "figure margin"
          }
        },
        "children": [
          {
            "type": "component",
            "name": "codeblock",
            "properties": {
              "class": {
                "type": "value",
                "value": "r"
              },
              "figwidth": {
                "type": "value",
                "value": "5"
              },
              "figheight": {
                "type": "value",
                "value": "3"
              }
            },
            "children": [
              {
                "type": "textnode",
                "value": "hist(rnorm(1000))"
              }
            ]
          },
          {
            "type": "component",
            "name": "caption",
            "children": [
              {
                "type": "textnode",
                "value": "Histogram of random variates."
              }
            ]
          }
        ]
      },
      {
        "type": "component",
        "name": "h1",
        "properties": {
          "id": {
            "type": "value",
            "value": "linear-model"
          }
        },
        "children": [
          {
            "type": "textnode",
            "value": "Linear Model"
          }
        ]
      },
      {
        "type": "component",
        "name": "codeblock",
        "properties": {
          "class": {
            "type": "value",
            "value": "r"
          },
          "hide": {
            "type": "value",
            "value": "true"
          }
        },
        "children": [
          {
            "type": "textnode",
            "value": "m <- lm(hwy ~ displ, data = mpg)"
          }
        ]
      },
      {
        "type": "component",
        "name": "p",
        "children": [
          {
            "type": "textnode",
            "value": "Let’s fit a model: "
          },
          {
            "type": "component",
            "name": "code",
            "properties": {
              "class": {
                "type": "value",
                "value": "r"
              }
            },
            "children": [
              {
                "type": "textnode",
                "value": "lm(hwy ~ displ, data = mpg)"
              }
            ]
          }
        ]
      },
      {
        "type": "component",
        "name": "figure",
        "properties": {
          "class": {
            "type": "value",
            "value": "figure page"
          }
        },
        "children": [
          {
            "type": "component",
            "name": "codeblock",
            "properties": {
              "class": {
                "type": "value",
                "value": "r"
              },
              "keep": {
                "type": "value",
                "value": "high"
              },
              "figwidth": {
                "type": "value",
                "value": "6"
              },
              "asp": {
                "type": "value",
                "value": "0.6"
              },
              "width": {
                "type": "value",
                "value": "50%"
              }
            },
            "children": [
              {
                "type": "textnode",
                "value": "ggplot(data = mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  geom_smooth(method='lm') +\n  xlab('Displacement') + ylab('Highway Fuel Efficiency')\n\nggplot(m, aes(x = mpg$displ, y = .resid)) +\n  geom_point() +\n  geom_hline(yintercept = 0) +\n  xlab('Displacement') + ylab('Residual Values')"
              }
            ]
          },
          {
            "type": "component",
            "name": "caption",
            "children": [
              {
                "type": "textnode",
                "value": "(Left) Displacement vs. highway efficiency. (Right) Residual plot."
              }
            ]
          }
        ]
      },
      {
        "type": "component",
        "name": "codeblock",
        "properties": {
          "class": {
            "type": "value",
            "value": "r small"
          }
        },
        "children": [
          {
            "type": "textnode",
            "value": "summary(m)"
          }
        ]
      },
      {
        "type": "component",
        "name": "codeblock",
        "properties": {
          "class": {
            "type": "value",
            "value": "r"
          },
          "bind": {
            "type": "value",
            "value": "coef"
          }
        },
        "children": [
          {
            "type": "textnode",
            "value": "toJSON(coefficients(m))"
          }
        ]
      },
      {
        "type": "component",
        "name": "p",
        "children": [
          {
            "type": "textnode",
            "value": "The fitted line is "
          },
          {
            "type": "component",
            "name": "math",
            "properties": {
              "mode": {
                "type": "value",
                "value": "inline"
              },
              "code": {
                "type": "expression",
                "value": "`y = ${coef[1]} x + ${coef[0]}`"
              }
            }
          },
          {
            "type": "textnode",
            "value": "."
          }
        ]
      },
      {
        "type": "component",
        "name": "h1",
        "properties": {
          "id": {
            "type": "value",
            "value": "et-cetera"
          }
        },
        "children": [
          {
            "type": "textnode",
            "value": "Et Cetera"
          }
        ]
      },
      {
        "type": "component",
        "name": "p",
        "children": [
          {
            "type": "textnode",
            "value": "The square root of 5 is "
          },
          {
            "type": "component",
            "name": "code",
            "properties": {
              "class": {
                "type": "value",
                "value": "italic"
              }
            },
            "children": [
              {
                "type": "textnode",
                "value": "r sqrt(5)"
              }
            ]
          },
          {
            "type": "textnode",
            "value": "."
          }
        ]
      }
    ]
  }
}